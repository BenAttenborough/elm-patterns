<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="HandheldFriendly" content="True">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="referrer" content="no-referrer-when-downgrade">

	<title>Wrap early, unwrap late</title>
	<meta name="description" content="">

	<link rel="stylesheet" href="http:&#x2F;&#x2F;sporto.github.io&#x2F;elm-patterns&#x2F;styles.css">

	
	
</head>
<body>
	<header class="px-2">
		<h1 class="text-3xl bold">
			<a href="http:&#x2F;&#x2F;sporto.github.io&#x2F;elm-patterns&#x2F;" class="no-underline">Elm Patterns</a>
		</h1>
	</header>
	<main class="flex">
		<nav class="px-2" style="width:20rem;">
			
			
				
<li class="post-list">
	<a href="http:&#x2F;&#x2F;sporto.github.io&#x2F;elm-patterns&#x2F;make-impossible-states-impossible&#x2F;">Make impossible states impossible</a>
</li>

			
				
<li class="post-list">
	<a href="http:&#x2F;&#x2F;sporto.github.io&#x2F;elm-patterns&#x2F;type-blindness&#x2F;">Type blindness</a>
</li>

			
				
<li class="post-list">
	<a href="http:&#x2F;&#x2F;sporto.github.io&#x2F;elm-patterns&#x2F;wrap-early&#x2F;">Wrap early, unwrap late</a>
</li>

			

			
			
		</nav>
		<main class="px-6 pb-6">
			

<article class="post">
    <header>
        <h1>Wrap early, unwrap late</h1>
    </header>
    <div class="content">
        <p>To avoid type blidness, you probably want to wrap your values in unique types.</p>
<p>When you do this it is a good idea to wrap your types as early as possible. E.g. when decoding values from external sources.</p>
<p>Then try to unwrap as late as possible.</p>
<h2 id="example-anti-patterns">Example anti-patterns</h2>
<pre style="background-color:#2b303b;">
<code><span style="color:#c0c5ce;">displayPriceInDollars : Float -&gt; String
displayPriceInDollars price =
    &quot;USD$&quot; ++ String.fromFloat price
</span></code></pre>
<p>There is nothing stopping us from passing something that is not dollars here (e.g. we might use Euros).</p>
<pre style="background-color:#2b303b;">
<code><span style="color:#c0c5ce;">calculateTotalPrice: List Float -&gt; Float
</span></code></pre>
<p>We could send a list of mixed currencies e.g. dollars and euros.</p>
<h2 id="pattern">Pattern</h2>
<pre style="background-color:#2b303b;">
<code><span style="color:#c0c5ce;">type Dollar = Dollar Float

displayPriceInDollars : Dollar -&gt; String
displayPriceInDollars (Dollar price) =
    &quot;USD$&quot; ++ String.fromFloat price
</span></code></pre>
<p>This enforces that we use the <code>Dollar</code> type as much as possible.</p>

    </div>

    
<div class="article-info">
	
	<div class="article-taxonomies">
		
		
	</div>
</div>

</article>


		</main>
	</main>
</body>
</html>
